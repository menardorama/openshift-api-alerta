#!/bin/bash

echo "Config settings..."

cat >${OPENSHIFT_DATA_DIR}/alertad.conf << EOF
SECRET_KEY = '$(< /dev/urandom tr -dc A-Za-z0-9_\!\@\#\$\%\^\&\*\(\)-+= | head -c 32)'

MONGO_HOST = '${OPENSHIFT_MONGODB_DB_HOST}'
MONGO_PORT = ${OPENSHIFT_MONGODB_DB_PORT}
MONGO_DATABASE = '${OPENSHIFT_APP_NAME}'
MONGO_USERNAME = '${OPENSHIFT_MONGODB_DB_USERNAME}'
MONGO_PASSWORD = '${OPENSHIFT_MONGODB_DB_PASSWORD}'

AUTH_REQUIRED = True
OAUTH2_CLIENT_ID = '379647311730-h7eh836lg77cbbm2pmh0b66nlb3nnpm8.apps.googleusercontent.com'
ALLOWED_EMAIL_DOMAINS = ['*']

PLUGINS = ['reject']
EOF

cat ${OPENSHIFT_DATA_DIR}/alertad.conf

export ALERTA_SVR_CONFIG_FILE=${OPENSHIFT_DATA_DIR}/alertad.conf
