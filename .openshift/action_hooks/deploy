#!/bin/bash

echo "Config settings..."

cat >${OPENSHIFT_DATA_DIR}/alertad.conf << EOF
SECRET_KEY = '$(< /dev/urandom tr -dc A-Za-z0-9_\!\@\#\$\%\^\&\*\(\)-+= | head -c 32)'

MONGO_HOST = '${OPENSHIFT_MONGODB_DB_HOST}'
MONGO_PORT = ${OPENSHIFT_MONGODB_DB_PORT}
MONGO_DATABASE = '${OPENSHIFT_APP_NAME}'
MONGO_USERNAME = '${OPENSHIFT_MONGODB_DB_USERNAME}'
MONGO_PASSWORD = '${OPENSHIFT_MONGODB_DB_PASSWORD}'

AUTH_REQUIRED = True
OAUTH2_CLIENT_ID = '744241357326-2m37jti56hjvapc1137la03d27pnpoa1.apps.googleusercontent.com'
OAUTH2_CLIENT_SECRET = 'iyTk0Feiz_sXX9BbJhJ_ssvY'
ALLOWED_EMAIL_DOMAINS = ['*']

ORS_ORIGINS = ['http://try.alerta.io', 'http://explorer.alerta.io', 'http://alerta-test-3.herokuapp.com']

PLUGINS = ['reject']
EOF

cat ${OPENSHIFT_DATA_DIR}/alertad.conf

export ALERTA_SVR_CONFIG_FILE=${OPENSHIFT_DATA_DIR}/alertad.conf
